import streamlit as st
import requests
import time
from datetime import datetime

# -----------------------------------------------------
# Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¹Ø§Ù…Ø©
# -----------------------------------------------------
st.set_page_config(page_title="Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±", page_icon="ğŸ“", layout="centered")

# -----------------------------------------------------
# ØªØ­Ù…ÙŠÙ„ CSS (Ù…Ù† static Ø£Ùˆ Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯)
# -----------------------------------------------------
def load_css():
    for path in ["static/style.css", "style.css"]:
        try:
            with open(path, "r", encoding="utf-8") as f:
                st.markdown(f"<style>{f.read()}</style>", unsafe_allow_html=True)
                return
        except FileNotFoundError:
            continue

load_css()

# -----------------------------------------------------
# Ø±Ø§Ø¨Ø· Google Apps Script (Ø§Ø³ØªØ¨Ø¯Ù„Ù‡ Ø¨Ø±Ø§Ø¨Ø·Ùƒ Ø§Ù„ÙØ¹Ù„ÙŠ)
# -----------------------------------------------------
GOOGLE_SHEET_URL = "https://script.google.com/macros/s/AKfycbz3hXsAawAMpu4LPj26-xntDvGWutZdjwl4dS-o570jKedIGRvyEizljrO5TvOMUCSt0Q/exec"

# -----------------------------------------------------
# Ø´Ø¹Ø§Ø± Ø¹Ù„ÙˆÙŠ
# -----------------------------------------------------
st.markdown(
    '<div class="form-logo-wrapper"><svg viewBox="0 0 512 512"><circle cx="256" cy="256" r="200" fill="#f0f0f0"/><text x="50%" y="53%" text-anchor="middle" font-size="140" font-family="sans-serif">ğŸ“</text></svg></div>',
    unsafe_allow_html=True
)
st.header("ğŸ“‹ ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ± Ø§Ù„Ù…Ø§Ø³ØªØ± ÙƒÙ„Ø§Ø³")

# -----------------------------------------------------
# Ø¥Ø¹Ø¯Ø§Ø¯ session_state Ù„Ù„ÙÙˆØ±Ù…
# -----------------------------------------------------
defaults = {
    "name": "",
    "email": "",
    "selected_country": "ğŸ‡¦ğŸ‡ª Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª",
    "phone_number": "",
    "masterclass": "ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù„Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§ - Ø£Ø´Ø±Ù Ø³Ø§Ù„Ù…",
    "session": "Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„",
}
for k, v in defaults.items():
    st.session_state.setdefault(k, v)

# -----------------------------------------------------
# Ù‚Ø§Ø¦Ù…Ø© Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø¯ÙˆÙ„
# -----------------------------------------------------
country_codes = {
    "ğŸ‡¦ğŸ‡ª Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª": "00971",
    "ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©": "00966",
    "ğŸ‡ªğŸ‡¬ Ù…ØµØ±": "0020",
    "ğŸ‡¶ğŸ‡¦ Ù‚Ø·Ø±": "00974",
    "ğŸ‡°ğŸ‡¼ Ø§Ù„ÙƒÙˆÙŠØª": "00965",
    "ğŸ‡§ğŸ‡­ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†": "00973",
    "ğŸ‡´ğŸ‡² Ø¹Ù…Ø§Ù†": "00968",
    "ğŸ‡¯ğŸ‡´ Ø§Ù„Ø£Ø±Ø¯Ù†": "00962",
    "ğŸ‡±ğŸ‡§ Ù„Ø¨Ù†Ø§Ù†": "00961"
}

# -----------------------------------------------------
# Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙÙˆØ±Ù…
# ----------------------------------------------------
